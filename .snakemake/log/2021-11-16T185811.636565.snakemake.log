The flag 'directory' used in rule aggregate_transcript_analysis is only valid for outputs, not inputs.
The flag 'directory' used in rule output_combine_files is only valid for outputs, not inputs.
Building DAG of jobs...
Creating conda environment /scratch/sjannalda/IsoTV/workflow/rules/../envs/pinfish.yaml...
Downloading and installing remote packages.
Environment for ../../IsoTV/workflow/envs/pinfish.yaml created (location: .snakemake/conda/f2e55bf4fc874467f187857759540083)
Using shell: /usr/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Job stats:
job                      count    min threads    max threads
---------------------  -------  -------------  -------------
CalculateDeSeq2Norm          1              1              1
ConcatenateCounts            1              1              1
CountTranscripts             2              1              1
ExtractPrimaryMapping        2              1              1
all                          1              1              1
total                        7              1              1

Select jobs to execute...

[Tue Nov 16 19:03:48 2021]
rule ExtractPrimaryMapping:
    input: Results/Quantification/HEPG2_1.sorted.bam, IGV/HEPG2_1.genome.bam
    output: IGV/HEPG2_1.transcriptome.bam
    jobid: 25
    wildcards: sample=HEPG2_1
    resources: tmpdir=/tmp, memory=4, time=1

Activating conda environment: /scratch/sjannalda/projects/SGNEX/.snakemake/conda/f2e55bf4fc874467f187857759540083

[Tue Nov 16 19:03:49 2021]
rule ExtractPrimaryMapping:
    input: Results/Quantification/HCT116_1.sorted.bam, IGV/HCT116_1.genome.bam
    output: IGV/HCT116_1.transcriptome.bam
    jobid: 18
    wildcards: sample=HCT116_1
    resources: tmpdir=/tmp, memory=4, time=1

Activating conda environment: /scratch/sjannalda/projects/SGNEX/.snakemake/conda/f2e55bf4fc874467f187857759540083
[Tue Nov 16 19:03:59 2021]
Finished job 18.
1 of 7 steps (14%) done
Select jobs to execute...

[Tue Nov 16 19:03:59 2021]
rule CountTranscripts:
    input: IGV/HCT116_1.transcriptome.bam
    output: Results/Quantification/HCT116_1.counts
    jobid: 17
    wildcards: sample=HCT116_1
    resources: tmpdir=/tmp, memory=4, time=1

[Tue Nov 16 19:03:59 2021]
Finished job 17.
2 of 7 steps (29%) done
[Tue Nov 16 19:04:09 2021]
Finished job 25.
3 of 7 steps (43%) done
Select jobs to execute...

[Tue Nov 16 19:04:09 2021]
rule CountTranscripts:
    input: IGV/HEPG2_1.transcriptome.bam
    output: Results/Quantification/HEPG2_1.counts
    jobid: 24
    wildcards: sample=HEPG2_1
    resources: tmpdir=/tmp, memory=4, time=1

[Tue Nov 16 19:04:09 2021]
Finished job 24.
4 of 7 steps (57%) done
Select jobs to execute...

[Tue Nov 16 19:04:09 2021]
rule ConcatenateCounts:
    input: /scratch/sjannalda/projects/SGNEX/reference/gencode.v32.primary_assembly.annotation.gtf, Results/GffCompare/nanopore.combined.gtf, Results/Quantification/HCT116_1.counts, Results/Quantification/HEPG2_1.counts
    output: Results/Quantification/counts.txt
    jobid: 2
    resources: tmpdir=/tmp, memory=4, time=1

[Tue Nov 16 19:04:19 2021]
Finished job 2.
5 of 7 steps (71%) done
Select jobs to execute...

[Tue Nov 16 19:04:19 2021]
rule CalculateDeSeq2Norm:
    input: Results/Quantification/counts.txt
    output: Results/Quantification/counts_deseq2norm.txt
    jobid: 1
    resources: tmpdir=/tmp, memory=4, time=1

[Tue Nov 16 19:04:20 2021]
Error in rule CalculateDeSeq2Norm:
    jobid: 1
    output: Results/Quantification/counts_deseq2norm.txt

RuleException:
CalledProcessError in line 40 of /scratch/sjannalda/IsoTV/workflow/rules/quantification.smk:
Command 'Rscript --vanilla /scratch/sjannalda/projects/SGNEX/.snakemake/scripts/tmpasp0be_y.deseq2norm.R' returned non-zero exit status 127.
  File "/scratch/sjannalda/IsoTV/workflow/rules/quantification.smk", line 40, in __rule_CalculateDeSeq2Norm
  File "/home/sjannalda/miniconda3/envs/snakemake/lib/python3.9/concurrent/futures/thread.py", line 52, in run
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /scratch/sjannalda/IsoTV/.snakemake/log/2021-11-16T185811.636565.snakemake.log
